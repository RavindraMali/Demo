<div class="container">
<table class="table table-striped">
<thead>
    <tr>
      
      <th scope="col">Product <% total = 0 %></th>
      <th>Price</th>
      <th>Quantity<% qty = 0 %></th>
      <th>Total</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
  <% @carts.each do |cart| %>
    <tr>
      <td><%= link_to cart.product&.name, product_path(cart.product&.id) %></td>
      <td><%= cart.product&.price %></td>
      <td><%= cart.quantity %></td>
      <td><%=  cart.product&.price * cart.quantity %></td>    
      <td> <%= link_to cart_path(cart), method: :delete, data: { turbo_method: :delete} do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-square-fill" viewBox="0 0 16 16">
        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z"/>
      </svg>
    <% end %> </td>
    </tr>
    <% qty += cart.quantity %>
    <% total += (cart.product&.price * cart.quantity ) %>
    <% end %>
    <tr>
        <td></td>
        <td>Total</td>
        <td><%= qty %></td>
        <td><%= total %></td>
        <td></td>
    </tr>
  </tbody>
</table>   
<div class="container col-md-4">

<%= form_with model: @order do |form| %>
  <h5>Total Payable amount for your order</h5>
  <%= form.text_field :total_amount, value: @total, :class => "form-control", :disabled => "true" %>
  <h5>Choose delivery address</h5>
  <% @addresses.each do |address| %>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="address_id" value="<%= address.id %>" id="flexRadioDefault1">
      <label class="form-check-label" for="flexRadioDefault1">
        <%= address %>
      </label>
    </div>
    <% end %>
  <%= form.submit %>
<% end %>

</div>
</div>
